<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>This is a test"</title>
    <link href="css/index.css" rel="stylesheet">

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- bootstrap CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


    <!-- bootstrap JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>

    <!-- Latest compiled and minified bootstrap-select CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <!-- Latest compiled and minified bootstrap-select JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    <!-- vue.js 开发环境版本，包含了有帮助的命令行警告 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

    <script src="https://unpkg.zhimg.com/axios/dist/axios.min.js"></script>

</head>
<body>

<!-- Modal 点击提交之后将弹出窗口提示成功提交文书 -->
<div class="modal fade" id="splitSuccessModal" tabindex="-1" aria-labelledby="splitSuccessModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="splitSuccessModalLabel">提交成功</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                成功提交文书文本
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="main-body" id="main-body">
    <div class="panel panel-default" id="splitPanel">
        <div class="panel-heading">文书正文</div>
        <div class="panel-body">
            <textarea name="text" id="originalText" class="form-control" v-model="originalText">
        </textarea>
            <button type="button" class="btn btn-success" id="splitConfirm" data-bs-toggle="modal"
                    data-bs-target="#splitSuccessModal" @click="splitConfirm">提交文书
            </button>
        </div>
    </div>

    <!-- 导航 Tab -->
    <div id="main-tab">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#select-name" role="tab"
                   aria-selected="true">姓名</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="gender-tab" data-bs-toggle="tab" href="#select-gender" role="tab"
                   aria-selected="false">性别</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="ethnic-tab" data-bs-toggle="tab" href="#select-ethnic" role="tab"
                   aria-selected="false">民族</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="bornplace-tab" data-bs-toggle="tab" href="#select-born-place" role="tab"
                   aria-selected="false">出生地</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="some-tab" data-bs-toggle="tab" href="#" role="tab"
                   aria-selected="false">Any</a>
            </li>
        </ul>
    </div>
    <!-- 导航 Tab 结束-->

    <!-- Tab 内容-->
    <div class="tab-content" id="tab-content">

        <!--选择姓名的单选框-->
        <div id="select-name" class="tab-pane fade show active" role="tabpanel" aria-labelledby="person-tab">
            选择人名
            <select class="form-control" v-model="selectedPerson">
                <option v-for="person in person" v-bind:value="person">
                    {{ person }}
                </option>
            </select>
            <div id="manual-add-name">
                手动输入人名
                <label for="toBeAddedName"></label>
                <input type="text" class="form-control" id="toBeAddedName" placeholder="请输入人名">
                <button type="button" class="btn btn-primary" id="addNameConfirm" @click="addName">
                    确定添加
                </button>
            </div>

            <p> SelectedName : {{ selectedPerson }}</p>
        </div>

        <!-- 选择性别 -->
        <div class="tab-pane fade" id="select-gender" role="tabpanel" aria-labelledby="gender-tab">
            选择性别

            <div class="form-check">
                <input class="form-check-input" type="radio" name="select-gender" id="select-gender-man"
                        value="男" v-model="selectedGender">
                <label class="form-check-label" for="select-gender-man">
                    男
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="select-gender" id="select-gender-woman"
                       value="女" v-model="selectedGender">
                <label class="form-check-label" for="select-gender-woman">
                    女
                </label>
            </div>
            <p> selectedGender: {{selectedGender}}</p>
        </div>

        <!-- 选择出生地 -->
        <div class="tab-pane fade" id="select-born-place" role="tabpanel" aria-labelledby="bornplace-tab">
            选择出生地
            <select class="form-control" v-model="selectedBornPlace">
                <option v-for="loc in loc" v-bind:value="loc">
                    {{ loc }}
                </option>
            </select>
            <div id="manula-add-loc">
                手动输入地名
                <label for="toBeAddedLoc"></label>
                <input type="text" class="form-control" id="toBeAddedLoc" placeholder="请输入地名">
                <button type="button" class="btn btn-primary" id="addLocConfirm" @click="addLoc">
                    确定添加
                </button>
            </div>
            <p> selectedBornPlace: {{ selectedBornPlace }}</p>
        </div>


        <!-- 民族 -->
        <div class="tab-pane fade" id="select-ethnic" role="tabpanel" aria-labelledby="ethnic-tab">
            选择民族
            <select class="form-control">

            </select>
        </div>

    </div>
    <!-- Tab 内容结束-->
</div>

</div>


<script>
    var url = "/split";
    var vm = new Vue({
        el: "#main-body",
        data: {
            originalText: '',
            splitText: [],
            date: [],
            loc: [],
            org: [],
            court: [],
            person: [],
            verb: [],
            adj: [],
            selectedPerson: '',
            selectedBornPlace: '',
            selectedGender: '',
        },
        methods: {
            splitConfirm: function () {
                var thisVm = this;
                axios.post(url, "text=" + thisVm.originalText).then(function (response) {
                    console.log(response.data);
                    thisVm.splitText = response.data;
                    // 在原有 array 上增加
                    thisVm.date.push(...thisVm.splitText.date);
                    thisVm.loc.push(...thisVm.splitText.loc);
                    thisVm.org.push(...thisVm.splitText.org);
                    thisVm.court.push(...thisVm.splitText.court);
                    thisVm.person.push(...thisVm.splitText.person);
                    thisVm.verb.push(...thisVm.splitText.verb);
                    thisVm.adj.push(...thisVm.splitText.adj);
                })
            },
            addName: function () {
                var name = $("#toBeAddedName").val();
                this.person.push(name);
            },
            addLoc: function () {
                this.loc.push($("#toBeAddedLoc").val());
            },
        }
    })


</script>
</body>
</html>
